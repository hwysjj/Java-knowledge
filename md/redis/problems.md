# 缓存常见问题

## 击穿
    - 解释：key过期，造成同一时间高并发访问数据库
    - 方案
        - 第一个get key = null -> setnx加锁 再去数据库拿，其他请求sleep
        - 第一个挂了？可以设置过期时间。 
        - 没挂，但是锁超时了，多线程（守护线程），一个线程取DB, 一个线程监控是否取回，更新锁时间

## 雪崩
    - 解释：大量key同时失效，大量访问到达数据库
    - 方案
        - 时点性无关，随机过期时间
        - 零点，强依赖击穿方案，或者业务层零点延时

## 穿透
    - 解释：从业务接受查询的是系统根本不存在的数据
    - 方案：
        - 布隆过滤器 （问题，不能删除）
            - client包含
            - client 算法， bitmap -> redis
            - redis集成布隆
        - 换布谷鸟
        - redis空key

## 一致性（双写）

## 分布式锁 redis

- setnx 加锁
- 过期时间
- 多线程（守护线程）延长过期
- 使用zookeeper做分布式锁
